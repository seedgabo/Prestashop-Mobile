<ion-navbar primary *navbar>
  <ion-toolbar>
      <ion-searchbar *ngIf="buscar" debounce="500" [(ngModel)]="queryTxt" (input)="getProducts($event)"> </ion-searchbar>
      <ion-buttons end>
          <button  (click)="buscar= !buscar; queryTxt=''">
              <ion-icon [name]="buscar ? 'close' : 'search'"></ion-icon>
          </button>

          <button (click)="navToCarrito()">
              <ion-icon name="cart"></ion-icon>
          </button>

          <button (click)="navToUser()">
              <ion-icon name="person"></ion-icon>
          </button>
      </ion-buttons>
  </ion-toolbar>
</ion-navbar>

<ion-content padding class="page1">
    <div *ngIf="!productos">
        <img [src]=" ps.url + 'images/general/header' + ps.append" alt=""/>
        <h2>{{ps.shopname | uppercase}}</h2>
    </div>

  <ion-list *ngIf="productos != undefined" [virtualScroll]="productos">
      <button ion-item  *virtualItem="#producto" (click)="verProducto(producto)">
          <ion-thumbnail item-left>
              <ion-img *ngIf="producto.id_default_image" src="{{ps.url + 'images/products/' + producto.id + '/' + producto.id_default_image+ '/small_default'+ ps.append}}"> </ion-img>
              <ion-img *ngIf="!producto.id_default_image" src="{{'img/sin-imagen.jpg'}}"> </ion-img>
          </ion-thumbnail>
          <h2>{{producto.name}}</h2>
          <h3 secondary>{{producto.quantity > 0 ? producto.quantity :  "Disponible"}}</h3>
          <p>{{toCurrency(producto.precio) |currency:'USD':true:'1.2-2'}}</p>
          <button clear item-right>Ver</button>
      </button>
  </ion-list>

  <ion-infinite-scroll (infinite)="loadMoreProducts($event)" *ngIf="more">
   <ion-infinite-scroll-content
       loadingSpinner="crescent"
      loadingText="Cargando Mas Productos...">
   ></ion-infinite-scroll-content>
 </ion-infinite-scroll>

</ion-content>

<button fab fab-top fab-right clear style="z-index:1000" (click)="toTop()"><ion-icon name="arrow-dropup"></ion-icon></button>
